# =============================================================================
# Production Environment Variables for Cloud Run
# =============================================================================
# This file documents the environment variables used in production.
# Actual values are set via Cloud Run --set-env-vars and --set-secrets.
#
# DO NOT commit actual secrets to this file!
# =============================================================================

# -----------------------------------------------------------------------------
# GCP Configuration
# -----------------------------------------------------------------------------
GCP_PROJECT_ID=gen-lang-client-0329024102
GCP_LOCATION=us-central1
MODEL=gemini-2.5-flash

# -----------------------------------------------------------------------------
# Database (Cloud SQL)
# -----------------------------------------------------------------------------
# DATABASE_URL format for Cloud SQL with Unix socket:
# postgresql://USER:PASSWORD@/DATABASE?host=/cloudsql/PROJECT:REGION:INSTANCE
#
# Password is injected via Secret Manager
DATABASE_URL=postgresql://demo_user:${DB_PASSWORD}@/demodb?host=/cloudsql/gen-lang-client-0329024102:us-central1:demo-db
SCHEMA_NAME=test

# Database pool settings (Cloud Run scales instances, not workers)
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=10
DB_COMMAND_TIMEOUT=60

# -----------------------------------------------------------------------------
# Clerk Authentication
# -----------------------------------------------------------------------------
ENABLE_CLERK_AUTH=true
CLERK_FRONTEND_API=mighty-leopard-52.clerk.accounts.dev
# Secrets injected via Secret Manager:
# - CLERK_SECRET_KEY
# - CLERK_PUBLISHABLE_KEY
# - CLERK_WEBHOOK_SECRET

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
DEMO_MAX_TOKENS=5000
DEMO_COOLDOWN_HOURS=24
DEMO_WARNING_THRESHOLD=85
IP_RATE_LIMIT_REQUESTS=100
IP_RATE_LIMIT_WINDOW_SEC=60

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ALLOW_ORIGINS=https://www.nexusintelligent.ai,https://odiseo-sales-ai.vercel.app,https://odiseo-web.vercel.app
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,OPTIONS
CORS_ALLOW_HEADERS=Authorization,Content-Type,X-Request-ID,X-Clerk-Token

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
ENABLE_FINGERPRINT=true
FINGERPRINT_SCORE_THRESHOLD=0.7
ABUSE_SCORE_BLOCK_THRESHOLD=0.9

# -----------------------------------------------------------------------------
# Logging (Cloud Run captures stdout automatically)
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_JSON_FORMAT=true
LOG_CONSOLE_ENABLED=true
LOG_TO_FILE=false

# -----------------------------------------------------------------------------
# Server (Cloud Run injects PORT)
# -----------------------------------------------------------------------------
# PORT=8080 (injected by Cloud Run)
PYTHONUNBUFFERED=1
